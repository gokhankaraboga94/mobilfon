<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teknik Servis Cihaz Takip Sistemi</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <!-- ULTRA PROFESSIONAL DESIGN -->
    <link rel="stylesheet" href="style_new.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    
    <!-- HTML5-QRCode Library for QR Scanner -->
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>

</head>

<body>
    <!-- TOAST CONTAINER -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Ä°NTERNET BAÄLANTISI UYARISI -->
    <div id="connectionWarning"
        style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.95); z-index: 99999; justify-content: center; align-items: center; flex-direction: column;">
        <div id="connectionWarningBox"
            style="background: linear-gradient(135deg, #e74c3c, #c0392b); padding: 40px 60px; border-radius: 20px; text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.5); max-width: 600px; animation: pulse 2s infinite;">
            <div id="connectionIcon" style="font-size: 80px; margin-bottom: 20px;">ğŸ“¡âŒ</div>
            <h1 id="connectionTitle" style="font-size: 32px; margin-bottom: 15px; color: #fff;">Ä°NTERNET BAÄLANTISI
                KESÄ°LDÄ°!
            </h1>
            <p id="connectionMessage" style="font-size: 18px; margin-bottom: 20px; color: #ecf0f1;">
                Database baÄŸlantÄ±sÄ± kurulamadÄ±.<br>
                <strong>LÃ¼tfen sistemi kullanmayÄ±n!</strong><br>
                GirdiÄŸiniz veriler kaydedilmeyecektir.
            </p>
            <div id="connectionStatus"
                style="font-size: 16px; color: #f39c12; margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 10px;">
                ğŸ”„ BaÄŸlantÄ± kontrol ediliyor...
            </div>
        </div>
    </div>

    <div class="conflict-notification" id="conflictNotification" onclick="openSyncModalFromNotification()"
        style="display: none;">
        <div class="conflict-notification-header">
            âš ï¸ Ã‡akÄ±ÅŸma Tespit Edildi!
        </div>
        <div class="conflict-notification-body">
            <span class="conflict-notification-count" id="conflictCount">0</span> adet liste Ã§akÄ±ÅŸmasÄ± bulundu.
            <br><strong>TÄ±klayarak dÃ¼zeltin â†’</strong>
        </div>
    </div>

    <!-- DATA SYNC VERIFICATION NOTIFICATION (SADECE ADMIN) -->
    <div class="data-sync-notification" id="dataSyncNotification" onclick="openDataSyncModal()" style="display: none;">
        <div class="data-sync-notification-header">
            ğŸ”„ Veri UyumsuzluÄŸu Tespit Edildi!
        </div>
        <div class="data-sync-notification-body">
            <span class="data-sync-notification-count" id="dataSyncCount">0</span> adet uyumsuzluk bulundu.
            <br><strong>TÄ±klayarak inceleyin ve dÃ¼zeltin â†’</strong>
        </div>
    </div>

    <!-- ADMIN NAV TOGGLE BUTTON (MOBILE) -->
    <button class="admin-nav-toggle" id="adminNavToggle" onclick="toggleAdminNav()">
        <span id="toggleIcon">â–¼</span>
    </button>

    <!-- ADMIN NAV BAR -->
    <div class="admin-nav collapsed" id="adminNav">
        <div class="nav-title">Mobilfon Teknik Servis Cihaz Takip Sistemi</div>
        <div class="nav-content">
            <!-- MEVCUT BUTONLAR -->
            <div class="nav-buttons">
                <button onclick="location.reload()" id="mainViewBtn">ğŸ  Ana Sayfa</button>
                <button onclick="showReportsView()" id="reportsBtn">ğŸ“Š Raporlar</button>
                <button onclick="showSystemLogs()" id="systemLogsBtn" style="display: none;">ğŸ“‹ Sistem LoglarÄ±</button>
                <button onclick="showDepoStatsModal()" id="depoStatsBtn" style="display: none;">ğŸ“¦ Depo</button>
                <button onclick="openPriceList()" id="priceListBtn">ğŸ’° Fiyat Listesi Sistemi</button>
                <button onclick="openAccounting()" id="accountingBtn">ğŸ“’ Muhasebe Sistemi</button>
                <button onclick="showUserManagement()" id="userManagementBtn" style="display: none;">ğŸ‘¥ KullanÄ±cÄ±
                    YÃ¶netimi</button>
                <button onclick="toggleMaintenanceMode()" id="maintenanceBtn" style="display: block;" class="maintenance-btn">
                    <span id="maintenanceBtnIcon">ğŸ”§</span>
                    <span id="maintenanceBtnText">BakÄ±m & OnarÄ±m</span>
                </button>

            </div>

            <!-- MEVCUT NAV-BUTTONS DIV'Ä°NDEN SONRA, NAV-SEARCH'TEN Ã–NCE -->
            <button onclick="openResetDashboardModal()" id="resetDashboardBtn" class="reset-dashboard-btn">
                ğŸ”„ Dashboard SÄ±fÄ±rla
            </button>

            <!-- YENÄ° EKLENEN: SAYIM MODU BUTONU (SADECE ADMIN Ä°Ã‡Ä°N) -->
            <button onclick="toggleSayimModu()" id="sayimModuBtn" class="sayim-modu-btn" style="display: none;">
                <span id="sayimModuIcon">ğŸ“Š</span>
                <span id="sayimModuText">SayÄ±m Modu: KAPALI</span>
            </button>

            <!-- YENÄ° EKLENEN ARAMA ALANI -->
            <div class="nav-search">
                <input type="text" id="navSearchInput" placeholder="ğŸ” Barkod ara..." maxlength="15">
                <div id="navSearchResult" class="nav-search-result"></div>
            </div>

            <!-- TEMA DEÄÄ°ÅTÄ°RME BUTONU -->
            <button class="theme-toggle-btn" id="themeToggleBtn" onclick="toggleTheme()" title="Gece/GÃ¼ndÃ¼z Modu">
                <span id="themeIcon">ğŸŒ™</span>
            </button>

            <!-- MEVCUT USER INFO -->
            <div class="nav-user-info" id="navUserInfo" style="display: none;">
                <span class="nav-user-name" id="navUserName">ğŸ‘¤ KullanÄ±cÄ±</span>
                <button class="nav-logout-button" id="navLogoutButton">Ã‡Ä±kÄ±ÅŸ</button>
            </div>
        </div>
    </div>




    <!-- REPORTS MODAL -->
    <div class="reports-modal" id="reportsModal">
        <div class="reports-content">
            <div class="reports-header">
                <h2>ğŸ“Š GÃ¼nlÃ¼k Raporlar</h2>
                <!-- close-reports butonunu gÃ¼ncelleyin -->
                <button class="close-reports" onclick="closeReportsModalWithoutNavigation()">âœ•</button>
            </div>

            <div class="report-filters">
                <div class="filter-group">
                    <label>ğŸ“… BaÅŸlangÄ±Ã§ Tarihi</label>
                    <input type="date" id="reportStartDate">
                </div>

                <div class="filter-group">
                    <label>ğŸ“… BitiÅŸ Tarihi</label>
                    <input type="date" id="reportEndDate">
                </div>

                <div class="filter-group">
                    <label>ğŸ“‹ Liste SeÃ§in</label>
                    <select id="reportList">
                        <option value="">TÃ¼m Hareketler</option>
                        <option value="partOrders">ğŸ”§ Teknisyen Adetleri/ParÃ§a Ä°stekleri</option>
                        <option value="atanacak">ğŸ“‹ Atanacak</option>
                        <option value="parcaBekliyor">âš™ï¸ ParÃ§a Bekliyor</option>
                        <option value="phonecheck">ğŸ“± PhoneCheck</option>
                        <option value="gokhan">ğŸ§‘â€ğŸ”§ GÃ¶khan</option>
                        <option value="enes">ğŸ§‘â€ğŸ”§ Enes</option>
                        <option value="yusuf">ğŸ§‘â€ğŸ”§ Yusuf</option>
                        <option value="samet">ğŸ§‘â€ğŸ”§ Samet</option>

                        <option value="engin">ğŸ§‘â€ğŸ”§ Engin</option>
                        <option value="ismail">ğŸ§‘â€ğŸ”§ Ä°smail</option>
                        <option value="mehmet">ğŸ§‘â€ğŸ”§ Mehmet</option>
                        <option value="onarim">ğŸ”§ OnarÄ±m TamamlandÄ±</option>
                        <option value="onCamDisServis">ğŸ”¨ Ã–n Cam DÄ±ÅŸ Servis</option> <!-- YENÄ° EKLENDÄ° -->
                        <option value="anakartDisServis">ğŸ”¨ Anakart DÄ±ÅŸ Servis</option> <!-- YENÄ° EKLENDÄ° -->
                        <option value="satisa">ğŸ’° SatÄ±ÅŸa Gidecek</option>
                        <option value="SonKullanÄ±cÄ±">SonKullanÄ±cÄ±</option>
                        <option value="sahiniden">ğŸª Sahibinden</option>
                        <option value="mediaMarkt">ğŸ›’ SatÄ±ÅŸ SonrasÄ±</option>
                        <option value="teslimEdilenler">âœ… Teslim Edilenler</option>
                        <option value="serviceReturn">ğŸ”„ Servise Geri DÃ¶nenler</option>
                        <option value="dailyReceived">ğŸ“¥ BugÃ¼n Teslim AlÄ±nan</option>
                    </select>
                </div>
            </div>

            <!-- Bu butonu report-filters'Ä±n hemen altÄ±na ekleyin -->
            <button class="clear-filters-btn" onclick="clearDetailFilters()" style="display: none;"
                id="clearFiltersBtn">
                ğŸ—‘ï¸ Filtreleri Temizle
            </button>

            <button class="generate-report-btn" onclick="generateReport()">
                ğŸ“Š Rapor OluÅŸtur
            </button>

            <button class="export-excel-btn" onclick="exportToExcel()" id="exportExcelBtn" disabled>
                ğŸ“Š Excel'e Aktar
            </button>

            <div class="report-results" id="reportResults">
                <!-- Results will be displayed here -->
            </div>
        </div>
    </div>

    <!-- MODAL FOR USER MANAGEMENT (ADD) -->
    <div class="modal-overlay" id="addUserModal">
        <div class="modal">
            <h2>â• Yeni KullanÄ±cÄ± Ekle</h2>
            <input type="email" id="newUserEmail" class="modal-input"
                placeholder="E-posta adresi (Ã¶rn: ahmet@servis.com)">
            <input type="password" id="newUserPassword" class="modal-input" placeholder="Åifre (min. 6 karakter)">
            <select id="newUserRole" class="modal-input" onchange="handleRoleChange()">
                <option value="viewer">ğŸ‘ï¸ GÃ¶rÃ¼ntÃ¼leyici (Viewer)</option>
                <option value="editor">âœï¸ DÃ¼zenleyici (Editor)</option>
                <option value="semi-admin">ğŸ‘” YarÄ± Admin (Semi-Admin)</option>
                <option value="technician">ğŸ”§ Teknisyen (Technician)</option>
                <option value="warehouse">ğŸ“¦ Depocu (Warehouse)</option>
            </select>

            <!-- Teknisyen Ä°zinleri -->
            <div id="technicianPermissions" style="display: none;">
                <h3 style="margin: 15px 0 10px 0; font-size: 16px;">ğŸ”‘ Teknisyen Ä°zinleri</h3>
                <div class="permissions-grid" id="permissionsGrid"></div>
            </div>

            <div class="modal-buttons">
                <button class="modal-button secondary" onclick="closeAddUserModal()">Ä°ptal</button>
                <button class="modal-button primary" onclick="addNewUser()">KullanÄ±cÄ± Ekle</button>
            </div>
        </div>
    </div>

    <!-- MODAL FOR USER MANAGEMENT (EDIT) -->
    <div class="modal-overlay" id="editUserModal">
        <div class="modal">
            <h2>âœï¸ KullanÄ±cÄ± DÃ¼zenle</h2>
            <div style="margin-bottom: 15px; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 8px;">
                <strong>Email:</strong> <span id="editUserEmail"></span>
            </div>
            <select id="editUserRole" class="modal-input" onchange="handleEditRoleChange()">
                <option value="viewer">ğŸ‘ï¸ GÃ¶rÃ¼ntÃ¼leyici (Viewer)</option>
                <option value="editor">âœï¸ DÃ¼zenleyici (Editor)</option>
                <option value="semi-admin">ğŸ‘” YarÄ± Admin (Semi-Admin)</option>
                <option value="technician">ğŸ”§ Teknisyen (Technician)</option>
                <option value="warehouse">ğŸ“¦ Depocu (Warehouse)</option>
            </select>

            <!-- Teknisyen Ä°zinleri -->
            <div id="editTechnicianPermissions" style="display: none;">
                <h3 style="margin: 15px 0 10px 0; font-size: 16px;">ğŸ”‘ Teknisyen Ä°zinleri</h3>
                <div class="permissions-grid" id="editPermissionsGrid"></div>
            </div>

            <div class="modal-buttons">
                <button class="modal-button secondary" onclick="closeEditUserModal()">Ä°ptal</button>
                <button class="modal-button primary" onclick="saveEditedUser()">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- MODAL FOR EDIT BARCODE -->
    <div class="modal-overlay" id="editBarcodeModal">
        <div class="modal">
            <h2>âœï¸ Barkod DÃ¼zenle</h2>
            <input type="text" id="editBarcodeInput" class="modal-input" placeholder="Yeni barkod (15 haneli)"
                maxlength="15">
            <div class="modal-buttons">
                <button class="modal-button secondary" onclick="closeEditBarcodeModal()">Ä°ptal</button>
                <button class="modal-button primary" onclick="saveEditedBarcode()">Kaydet</button>
            </div>
        </div>
    </div>


    <!-- MODAL FOR PART ORDER TYPE SELECTION -->
    <div class="modal-overlay" id="partOrderTypeModal">
        <div class="modal" style="max-width: 500px;">
            <h2>ğŸ”§ ParÃ§a SipariÅŸ TÃ¼rÃ¼ SeÃ§in</h2>
            <p style="margin-bottom: 25px; opacity: 0.9;">Tek bir cihaz iÃ§in mi yoksa birden fazla cihaz iÃ§in mi parÃ§a
                sipariÅŸi vereceksiniz?</p>

            <div style="display: grid; gap: 15px;">
                <button class="part-order-type-btn" onclick="selectPartOrderType('single')"
                    style="padding: 20px; background: linear-gradient(135deg, #3498db, #2980b9); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 24px;">ğŸ“±</span>
                    <div style="text-align: left;">
                        <div>Tek ParÃ§a SipariÅŸi</div>
                        <div style="font-size: 13px; font-weight: 400; opacity: 0.9; margin-top: 4px;">Bir cihaz iÃ§in
                            parÃ§a sipariÅŸi
                        </div>
                    </div>
                </button>

                <button class="part-order-type-btn" onclick="selectPartOrderType('multiple')"
                    style="padding: 20px; background: linear-gradient(135deg, #9b59b6, #8e44ad); color: white; border: none; border-radius: 12px; font-size: 16px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 24px;">ğŸ“¦</span>
                    <div style="text-align: left;">
                        <div>Ã‡oklu ParÃ§a SipariÅŸi</div>
                        <div style="font-size: 13px; font-weight: 400; opacity: 0.9; margin-top: 4px;">Birden fazla
                            cihaz iÃ§in toplu
                            sipariÅŸ</div>
                    </div>
                </button>
            </div>

            <div class="modal-buttons" style="margin-top: 20px;">
                <button class="modal-button secondary" onclick="closePartOrderTypeModal()">Ä°ptal</button>
            </div>
        </div>
    </div>

    <!-- MODAL FOR PART ORDER (TECHNICIAN) -->

    <div class="modal-overlay" id="partOrderModal">
        <div class="modal">
            <h2>ğŸ”§ ParÃ§a SipariÅŸ Et</h2>
            <div class="part-order-form">
                <div id="barcodeInputContainer">
                    <label id="barcodeLabel">15 Haneli Barkod:</label>
                    <input type="text" id="partOrderBarcode" class="modal-input" placeholder="Ã–rn: 123456789012345"
                        maxlength="15">
                    <textarea id="partOrderBarcodeMultiple" class="modal-input"
                        placeholder="Birden fazla barkod girin (her satÄ±ra bir barkod veya virgÃ¼l ile ayÄ±rÄ±n)&#10;Ã–rn:&#10;123456789012345&#10;234567890123456&#10;345678901234567"
                        rows="5" style="display: none; resize: vertical; font-family: monospace;"></textarea>
                    <div id="barcodeCount"
                        style="display: none; margin-top: 5px; font-size: 13px; color: #3498db; font-weight: 600;">
                    </div>
                </div>

                <div>
                    <label>Cihaz Modeli:</label>
                    <select id="partOrderModel" class="modal-input">
                        <option value="">-- Model SeÃ§iniz --</option>
                        <option value="Ä°PHONE 11">Ä°PHONE 11</option>
                        <option value="Ä°PHONE 11 PRO">Ä°PHONE 11 PRO</option>
                        <option value="Ä°PHONE 11 PRO MAX">Ä°PHONE 11 PRO MAX</option>
                        <option value="Ä°PHONE 12">Ä°PHONE 12</option>
                        <option value="Ä°PHONE 12 MÄ°NÄ°">Ä°PHONE 12 MÄ°NÄ°</option>
                        <option value="Ä°PHONE 12 PRO">Ä°PHONE 12 PRO</option>
                        <option value="Ä°PHONE 12 PROMAX">Ä°PHONE 12 PROMAX</option>
                        <option value="Ä°PHONE 13">Ä°PHONE 13</option>
                        <option value="Ä°PHONE 13 MÄ°NÄ°">Ä°PHONE 13 MÄ°NÄ°</option>
                        <option value="Ä°PHONE 13 PRO">Ä°PHONE 13 PRO</option>
                        <option value="Ä°PHONE 13 PROMAX">Ä°PHONE 13 PROMAX</option>
                        <option value="Ä°PHONE 14">Ä°PHONE 14</option>
                        <option value="Ä°PHONE 14 PLUS">Ä°PHONE 14 PLUS</option>
                        <option value="Ä°PHONE 14 PRO">Ä°PHONE 14 PRO</option>
                        <option value="Ä°PHONE 14 PROMAX">Ä°PHONE 14 PROMAX</option>
                        <option value="Ä°PHONE 15">Ä°PHONE 15</option>
                        <option value="Ä°PHONE 15 PLUS">Ä°PHONE 15 PLUS</option>
                        <option value="Ä°PHONE 15 PRO">Ä°PHONE 15 PRO</option>
                        <option value="Ä°PHONE 15 PROMAX">Ä°PHONE 15 PROMAX</option>
                        <option value="Ä°PHONE 16">Ä°PHONE 16</option>
                        <option value="Ä°PHONE 16 PRO">Ä°PHONE 16 PRO</option>
                        <option value="Ä°PHONE 16 PROMAX">Ä°PHONE 16 PROMAX</option>
                        <option value="Ä°PHONE X">Ä°PHONE X</option>
                        <option value="Ä°PHONE XR">Ä°PHONE XR</option>
                        <option value="Ä°PHONE XS">Ä°PHONE XS</option>
                        <option value="Ä°PHONE XS MAX">Ä°PHONE XS MAX</option>
                        <option value="Ä°PHONE 8 PLUS">Ä°PHONE 8 PLUS</option>
                        <option value="Ä°PHONE SE 2020">Ä°PHONE SE 2020</option>
                        <option value="LG">LG</option>
                        <option value="MÄ° 10 LÄ°TE">MÄ° 10 LÄ°TE</option>
                        <option value="REALME C21">REALME C21</option>
                        <option value="REDMÄ° 12">REDMÄ° 12</option>
                        <option value="REDMÄ° 12PRO">REDMÄ° 12PRO</option>
                        <option value="REDMÄ° 13">REDMÄ° 13</option>
                        <option value="SAMSUNG A03">SAMSUNG A03</option>
                        <option value="SAMSUNG A06">SAMSUNG A06</option>
                        <option value="SAMSUNG A12">SAMSUNG A12</option>
                        <option value="SAMSUNG A13">SAMSUNG A13</option>
                        <option value="SAMSUNG A14">SAMSUNG A14</option>
                        <option value="SAMSUNG A23">SAMSUNG A23</option>
                        <option value="SAMSUNG A24">SAMSUNG A24</option>
                        <option value="SAMSUNG A34">SAMSUNG A34</option>
                        <option value="SAMSUNG A35">SAMSUNG A35</option>
                        <option value="SAMSUNG A52">SAMSUNG A52</option>
                        <option value="SAMSUNG A53">SAMSUNG A53</option>
                        <option value="SAMSUNG A54">SAMSUNG A54</option>
                        <option value="SAMSUNG A72">SAMSUNG A72</option>
                        <option value="SAMSUNG A73">SAMSUNG A73</option>
                        <option value="SAMSUNG M51">SAMSUNG M51</option>
                        <option value="SAMSUNG NOTE 20 ULTRA">SAMSUNG NOTE 20 ULTRA</option>
                        <option value="SAMSUNG NOTE 3">SAMSUNG NOTE 3</option>
                        <option value="SAMSUNG S20">SAMSUNG S20</option>
                        <option value="SAMSUNG S20 FE">SAMSUNG S20 FE</option>
                        <option value="SAMSUNG S20 ULTRA">SAMSUNG S20 ULTRA</option>
                        <option value="SAMSUNG S21 FE">SAMSUNG S21 FE</option>
                        <option value="SAMSUNG S21 PLUS">SAMSUNG S21 PLUS</option>
                        <option value="SAMSUNG S21 ULTRA">SAMSUNG S21 ULTRA</option>
                        <option value="SAMSUNG S22">SAMSUNG S22</option>
                        <option value="SAMSUNG S22+">SAMSUNG S22+</option>
                        <option value="SAMSUNG S22 ULTRA">SAMSUNG S22 ULTRA</option>
                        <option value="SAMSUNG S23">SAMSUNG S23</option>
                        <option value="SAMSUNG S23 PLUS">SAMSUNG S23 PLUS</option>
                        <option value="SAMSUNG S23 FE">SAMSUNG S23 FE</option>
                        <option value="SAMSUNG S23 ULTRA">SAMSUNG S23 ULTRA</option>
                        <option value="SAMSUNG S24">SAMSUNG S24</option>
                        <option value="SAMSUNG S24 PLUS">SAMSUNG S24 PLUS</option>
                        <option value="SAMSUNG S24 ULTRA">SAMSUNG S24 ULTRA</option>
                        <option value="SAMSUNG S25 ULTRA">SAMSUNG S25 ULTRA</option>
                        <option value="OMÄ°X X400">OMÄ°X X400</option>
                    </select>
                </div>

                <div>
                    <label>MÃ¼ÅŸteri / Bayi (Ä°steÄŸe BaÄŸlÄ±):</label>
                    <select id="partOrderCustomer" class="modal-input">
                        <option value="">-- SeÃ§iniz (Ä°steÄŸe BaÄŸlÄ±) --</option>
                        <option value="TEÅHÄ°S">TEÅHÄ°S</option>
                        <option value="SAHÄ°BÄ°NDEN">SAHÄ°BÄ°NDEN</option>
                        <option value="DEPO">DEPO</option>
                        <option value="YENÄ°LÄ°YO">YENÄ°LÄ°YO</option>
                        <option value="MEDÄ°AMARKT">MEDÄ°AMARKT</option>
                        <option value="LETGO">LETGO</option>
                        <option value="TURKCELL">TURKCELL</option>
                        <option value="TELEKOM">TELEKOM</option>
                        <option value="BAYER">BAYER</option>
                        <option value="SATIÅ">SATIÅ</option>
                        <option value="KALÄ°TE KONTROL">KALÄ°TE KONTROL</option>
                        <option value="YÃ–NETÄ°M">YÃ–NETÄ°M</option>
                        <option value="BÄ°GBOSS">BÄ°GBOSS</option>
                        <option value="MUHASEBE">MUHASEBE</option>
                        <option value="YAZILIM">YAZILIM</option>
                        <option value="SON KULLANICI">SON KULLANICI</option>
                        <option value="DIÅ SERVÄ°S">DIÅ SERVÄ°S</option>
                        <option value="FÄ°RMA Ä°Ã‡Ä° Ã‡ALIÅAN">FÄ°RMA Ä°Ã‡Ä° Ã‡ALIÅAN</option>
                        <option value="KARGO">KARGO</option>
                        <option value="HEPSÄ°BURADA">HEPSÄ°BURADA</option>
                    </select>
                </div>

                <div>
                    <label>StatÃ¼ (Ä°steÄŸe BaÄŸlÄ±):</label>
                    <select id="partOrderStatus" class="modal-input">
                        <option value="">-- SeÃ§iniz (Ä°steÄŸe BaÄŸlÄ±) --</option>
                        <option value="ÃœRETÄ°ME UYGUN DEÄÄ°L">ÃœRETÄ°ME UYGUN DEÄÄ°L</option>
                        <option value="Ä°ADE">Ä°ADE</option>
                        <option value="ÃœRETÄ°M">ÃœRETÄ°M</option>
                        <option value="PARÃ‡A BEKLÄ°YOR">PARÃ‡A BEKLÄ°YOR</option>
                        <option value="DIÅ SERVÄ°S">DIÅ SERVÄ°S</option>
                        <option value="FÄ°YAT ONAYI">FÄ°YAT ONAYI</option>
                        <option value="SERVÄ°S TEKRARI">SERVÄ°S TEKRARI</option>
                        <option value="KONTROL">KONTROL</option>
                        <option value="SERTÄ°FÄ°KA">SERTÄ°FÄ°KA</option>
                    </select>
                </div>

                <div>
                    <label>Hizmetler (Ä°steÄŸe BaÄŸlÄ±):</label>
                    <select id="partOrderService" class="modal-input">
                        <option value="">-- SeÃ§iniz (Ä°steÄŸe BaÄŸlÄ±) --</option>
                        <option value="YÃœKSELTME">YÃœKSELTME</option>
                        <option value="CAM SÄ°LME">CAM SÄ°LME</option>
                        <option value="YAZILIM YÃœKLEME">YAZILIM YÃœKLEME</option>
                        <option value="SWAP KARARI">SWAP KARARI</option>
                        <option value="TEMÄ°ZLÄ°K">TEMÄ°ZLÄ°K</option>
                        <option value="KASA PARLATMA">KASA PARLATMA</option>
                        <option value="Ä°MEÄ° KONTROL">Ä°MEÄ° KONTROL</option>
                        <option value="LEHÄ°M Ä°ÅLEM">LEHÄ°M Ä°ÅLEM</option>
                        <option value="GENEL BAKIM">GENEL BAKIM</option>
                        <option value="Ä°ADE DEPO">Ä°ADE DEPO</option>
                        <option value="MÃœÅTERÄ° Ä°ADE">MÃœÅTERÄ° Ä°ADE</option>
                        <option value="ONARIM">ONARIM</option>
                        <option value="ARKA KAPAK YAPIÅTIRMA">ARKA KAPAK YAPIÅTIRMA</option>
                        <option value="EKRAN BANDI YENÄ°LEME">EKRAN BANDI YENÄ°LEME</option>
                        <option value="CHÄ°P AKTARIM">CHÄ°P AKTARIM</option>
                        <option value="FACE ID">FACE ID</option>
                    </select>
                </div>

                <div>
                    <label>Not (Ä°steÄŸe BaÄŸlÄ±):</label>
                    <textarea id="partOrderNote" class="modal-input" placeholder="Eklemek istediÄŸiniz notlar..."
                        rows="3" style="resize: vertical;"></textarea>
                </div>

                <div>
                    <label>Teknisyen HasarÄ±:</label>
                    <select id="partOrderTechnicianDamage" class="modal-input">
                        <option value="">-- SeÃ§iniz (Ä°steÄŸe BaÄŸlÄ±) --</option>
                        <option value="Var">Var</option>
                        <option value="Yok">Yok</option>
                    </select>
                </div>

                <div>
                    <label>Ä°stenilen ParÃ§alar (1-4 adet):</label>
                    <div class="part-inputs-grid">
                        <div class="part-input-group">
                            <label>ParÃ§a 1:</label>
                            <input type="text" id="partOrderPart1" placeholder="Opsiyonel">
                        </div>
                        <div class="part-input-group">
                            <label>ParÃ§a 2:</label>
                            <input type="text" id="partOrderPart2" placeholder="Opsiyonel">
                        </div>
                        <div class="part-input-group">
                            <label>ParÃ§a 3:</label>
                            <input type="text" id="partOrderPart3" placeholder="Opsiyonel">
                        </div>
                        <div class="part-input-group">
                            <label>ParÃ§a 4:</label>
                            <input type="text" id="partOrderPart4" placeholder="Opsiyonel">
                        </div>
                    </div>
                </div>
            </div>

            <div class="modal-buttons">
                <button class="modal-button secondary" onclick="closePartOrderModal()">Ä°ptal</button>
                <button class="modal-button primary" onclick="submitPartOrder()">Ä°stek GÃ¶nder</button>
            </div>
        </div>
    </div>

    <!-- PROFESYONEL LOGIN EKRANI -->
    <div id="loginScreen" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <div class="login-icon">ğŸ”§</div>
                <h2>Mobilfon Teknik Servis GiriÅŸi</h2>
                <p>Cihaz Takip Sistemi</p>
            </div>
            <div class="login-form">
                <div class="input-group">
                    <span class="input-icon">ğŸ“§</span>
                    <input type="email" id="emailInput" class="login-input" placeholder="E-posta adresiniz"
                        autocomplete="email">
                </div>
                <div class="input-group">
                    <span class="input-icon">ğŸ”’</span>
                    <input type="password" id="passwordInput" class="login-input" placeholder="Åifreniz"
                        autocomplete="current-password">
                </div>
                <div id="errorMessage" class="error-message"></div>
                <button id="loginButton" class="login-button">GiriÅŸ Yap</button>
            </div>
            <div class="login-footer">
                <p>Â© 2025 Teknik Servis Sistemi</p>
            </div>
        </div>
    </div>



    <div id="appContainer" class="app-container">

        <!-- DASHBOARD PANEL - ADMIN PANELÄ°N HEMEN ALTINDA SABÄ°T -->
        <div id="dashboardPanel" class="dashboard-panel" style="display: none;">
            <div class="dashboard-header">
                <h2>ğŸ“Š GÃ¼nlÃ¼k Dashboard</h2>
                <div class="dashboard-date" id="dashboardDate">YÃ¼kleniyor...</div>
                <button id="restoreDashboardBtn" onclick="restoreDashboard()"
                    style="display: none; padding: 10px 18px; background: linear-gradient(135deg, #27ae60, #229954); color: white; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; margin-left: 15px; box-shadow: 0 4px 12px rgba(39, 174, 96, 0.3);">
                    â™»ï¸ Geri YÃ¼kle
                </button>
            </div>

            <div class="dashboard-stats">
                <div class="dashboard-stat-card">
                    <span class="dashboard-stat-icon">ğŸ“¥</span>
                    <div class="dashboard-stat-label">BugÃ¼n Teslim AlÄ±nan</div>
                    <div class="dashboard-stat-value" id="dashboardTeslimAlinan">0</div>
                </div>

                <div class="dashboard-stat-card">
                    <span class="dashboard-stat-icon">ğŸ“¤</span>
                    <div class="dashboard-stat-label">BugÃ¼n Teslim Edilen</div>
                    <div class="dashboard-stat-value" id="dashboardTeslimEdilen">0</div>
                </div>
            </div>

            <div class="dashboard-details">
                <h3>ğŸ“‹ Teslim AlÄ±nan Kaynak DaÄŸÄ±lÄ±mÄ±</h3>
                <div class="dashboard-detail-item">
                    <span class="dashboard-detail-label">Atanacak(TeÅŸhis)</span>
                    <span class="dashboard-detail-value" id="dashboardAtanacakCount">0</span>
                </div>
                <div class="dashboard-detail-item">
                    <span class="dashboard-detail-label">SonKullanÄ±cÄ±</span>
                    <span class="dashboard-detail-value" id="dashboardSonKullanÄ±cÄ±Count">0</span>
                </div>
                <div class="dashboard-detail-item">
                    <span class="dashboard-detail-label">Sahibinden</span>
                    <span class="dashboard-detail-value" id="dashboardSahibindenCount">0</span>
                </div>
                <div class="dashboard-detail-item">
                    <span class="dashboard-detail-label">SatÄ±ÅŸ SonrasÄ±</span>
                    <span class="dashboard-detail-value" id="dashboardMediaMarktCount">0</span>
                </div>
                <!-- âœ… YENÄ° EKLENEN SATIR -->
                <div class="dashboard-detail-item" style="border-left: 3px solid #e67e22;">
                    <span class="dashboard-detail-label">ğŸ”„ Servise Geri DÃ¶nenler</span>
                    <span class="dashboard-detail-value" id="dashboardServiceReturnCount">0</span>
                </div>
            </div>
        </div>

        <!-- USER MANAGEMENT SECTION (ADMIN ONLY) -->
        <div id="userManagement" class="user-management" style="display: none;">
            <h2>ğŸ‘¥ KullanÄ±cÄ± YÃ¶netimi</h2>
            <div class="user-list" id="userList">
                <!-- Users will be loaded here -->
            </div>
            <button class="add-user-btn" onclick="openAddUserModal()">
                <span>â•</span>
                <span>Yeni KullanÄ±cÄ± Ekle</span>
            </button>
        </div>

        <div id="adminPanel">
            <h2>ğŸ‘‘ Admin Paneli</h2>
            <div class="admin-stats">
                <!-- GRÄ° LÄ°STE - ONAY BEKLEYEN TRANSFERLER -->
                <div class="admin-stat-box gri-liste-stat" id="adminGriListeBox" onclick="scrollToGriListe()">
                    <div class="label">â³ Onay Bekleyen Transferler</div>
                    <div id="adminGriListeCount" class="value gri-liste-value">0</div>
                </div>

                <div class="admin-stat-box" id="adminTotalBarcodesBox" onclick="showAdminCardDetails('total')">
                    <div class="label">Servisteki Toplam Cihaz</div>
                    <div id="adminTotalBarcodes" class="value">0</div>
                </div>
                <!-- EÅLEÅME ORANI VE EÅLEÅEN BARKOD SÄ°LÄ°NDÄ° -->
                <div class="admin-stat-box" id="adminAtanacakBox">
                    <div class="label">Atanacak Cihazlar</div>
                    <div id="adminAtanacak" class="value">0</div>
                </div>
                <div class="admin-stat-box" id="adminParcaBekliyorBox">
                    <div class="label">ParÃ§a Bekliyor</div>
                    <div id="adminParcaBekliyor" class="value">0</div>
                </div>
                <div class="admin-stat-box" id="adminPhonecheckBox">
                    <div class="label">PhoneCheck</div>
                    <div id="adminPhonecheck" class="value">0</div>
                </div>

                <div class="admin-stat-box" id="adminSonKullaniciBox" onclick="showAdminCardDetails('SonKullanÄ±cÄ±')">
                    <div class="label">SonKullanÄ±cÄ±</div>
                    <div id="SonKullanÄ±cÄ±" class="value">0</div>
                </div>


                <div class="admin-stat-box" id="adminOnarimBox">
                    <div class="label">OnarÄ±m TamamlandÄ±</div>
                    <div id="adminOnarim" class="value">0</div>
                </div>
                <!-- YENÄ° EKLENEN DIÅ SERVÄ°SLER -->
                <div class="admin-stat-box" id="adminOnCamDisServisBox" onclick="showAdminCardDetails('onCamDisServis')">
                    <div class="label">Ã–n Cam DÄ±ÅŸ Servis</div>
                    <div id="adminOnCamDisServis" class="value">0</div>
                </div>
                <div class="admin-stat-box" id="adminAnakartDisServisBox" onclick="showAdminCardDetails('anakartDisServis')">
                    <div class="label">Anakart DÄ±ÅŸ Servis</div>
                    <div id="adminAnakartDisServis" class="value">0</div>
                </div>
                
                <!-- YENÄ° EKLENEN: GARANTÄ° SERVÄ°S -->
                <div class="admin-stat-box" id="adminGarantiServisBox" onclick="showAdminCardDetails('garantiServis')">
                    <div class="label">ğŸ›¡ï¸ Garanti Servis</div>
                    <div id="adminGarantiServis" class="value">0</div>
                </div>
                
                <!-- ESKÄ° DIÅ SERVÄ°S SÄ°LÄ°NDÄ° -->

                <div class="admin-stat-box" id="adminSatisaBox">
                    <div class="label">SatÄ±ÅŸa Gidecek</div>
                    <div id="adminSatisa" class="value">0</div>
                </div>
                <div class="admin-stat-box" id="adminSahinidenBox">
                    <div class="label">Sahibinden</div>
                    <div id="adminSahiniden" class="value">0</div>
                </div>
       

                <div class="admin-stat-box" id="adminTeknisyenlerBox" onclick="showAdminCardDetails('teknisyenler')">
                    <div class="label">Toplam Teknisyen CihazlarÄ±</div>
                    <div id="adminTeknisyenler" class="value">0</div>
                </div>
                <div class="admin-stat-box" id="adminTeslimEdilenlerBox" onclick="showAdminCardDetails('teslimEdilenler')">
                    <div class="label">Teslim Edilenler</div>
                    <div id="adminTeslimEdilenler" class="value">0</div>
                </div>
            </div>

            <!-- Barkod Ara BÃ¶lÃ¼mÃ¼ Admin Panele TaÅŸÄ±ndÄ± -->
            <div style="margin-top: 25px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 12px;">
                <label for="searchInput"
                    style="display: block; margin-bottom: 10px; font-size: 18px; font-weight: bold;">ğŸ”
                    Arama Yap:</label>
                <textarea id="searchInput" placeholder="Aramak istediÄŸiniz barkodu girin..."
                    style="height: 60px; background: rgba(255,255,255,0.9); color: #333;"></textarea>
                <div id="searchResult"
                    style="margin-top: 10px; padding: 10px; background: rgba(10, 78, 180, 0.493); border-radius: 8px; min-height: 40px; display: none; color: #fff;">
                </div>
                <div id="partInfoAdmin" style="display: none;"></div>
                <div id="historyLog" class="history-log"
                    style="display: none; background: rgba(255,255,255,0.1); margin-top: 10px;"></div>
            </div>
        </div>

        <!-- TIMEOUT DASHBOARD (ADMIN & SEMI-ADMIN ONLY) -->
        <div id="timeoutDashboardPanel" class="timeout-dashboard-panel" style="display: none;">
            <div class="timeout-dashboard-header">
                <h2>â° Zaman AÅŸÄ±mÄ± Takip Dashboard</h2>
                <p style="opacity: 0.9; margin-top: 5px;">Bekleyen CihazlarÄ±n SÃ¼re BazlÄ± DaÄŸÄ±lÄ±mÄ±</p>
            </div>

            <div class="timeout-dashboard-stats">
                <div class="timeout-stat-card white">
                    <div class="timeout-stat-icon">âšª</div>
                    <div class="timeout-stat-value" id="timeoutDashboardWhite">0</div>
                    <div class="timeout-stat-label">0-2 GÃ¼n Bekleyenler</div>
                    <div class="timeout-stat-sublabel">Yeni GiriÅŸ</div>
                </div>

                <div class="timeout-stat-card green">
                    <div class="timeout-stat-icon">ğŸŸ¢</div>
                    <div class="timeout-stat-value" id="timeoutDashboardGreen">0</div>
                    <div class="timeout-stat-label">3-7 GÃ¼n Bekleyenler</div>
                    <div class="timeout-stat-sublabel">Normal SÃ¼re</div>
                </div>

                <div class="timeout-stat-card yellow">
                    <div class="timeout-stat-icon">ğŸŸ¡</div>
                    <div class="timeout-stat-value" id="timeoutDashboardYellow">0</div>
                    <div class="timeout-stat-label">7-14 GÃ¼n Bekleyenler</div>
                    <div class="timeout-stat-sublabel">Dikkat Gerekli</div>
                </div>

                <div class="timeout-stat-card red">
                    <div class="timeout-stat-icon">ğŸ”´</div>
                    <div class="timeout-stat-value" id="timeoutDashboardRed">0</div>
                    <div class="timeout-stat-label">14+ GÃ¼n Bekleyenler</div>
                    <div class="timeout-stat-sublabel">Acil MÃ¼dahale</div>
                </div>
            </div>
        </div>

        <!-- PARÃ‡A TÃœRLERÄ° DASHBOARD PANELÄ° -->
        <div id="partTypesDashboardPanel" class="parts-dashboard-panel">
            <div class="parts-dashboard-header">
                <h2>ğŸ”§ ParÃ§a/Ä°ÅŸlem TÃ¼rleri Dashboard</h2>
                <p style="opacity: 0.9; margin-top: 5px;">Her parÃ§a tÃ¼rÃ¼nde bekleyen cihaz sayÄ±larÄ±</p>
            </div>

            <div class="parts-dashboard-stats">
                <!-- Mevcut Listeler -->
                <div class="parts-stat-card parcaBekliyor" onclick="openSectionInDashboard('parcaBekliyor', event)">
                    <div class="parts-stat-icon">âš™ï¸</div>
                    <div class="parts-stat-value" id="partsDashboardParcaBekliyor">0</div>
                    <div class="parts-stat-label">PARÃ‡A BEKLÄ°YOR</div>
                </div>

                <div class="parts-stat-card phonecheck" onclick="openSectionInDashboard('phonecheck', event)">
                    <div class="parts-stat-icon">ğŸ“±</div>
                    <div class="parts-stat-value" id="partsDashboardPhonecheck">0</div>
                    <div class="parts-stat-label">PHONECHECK</div>
                </div>

                <div class="parts-stat-card onarim" onclick="openSectionInDashboard('onarim', event)">
                    <div class="parts-stat-icon">ğŸ”§</div>
                    <div class="parts-stat-value" id="partsDashboardOnarim">0</div>
                    <div class="parts-stat-label">ONARIM TAMAMLANDI</div>
                </div>

                <div class="parts-stat-card atanacak" onclick="openSectionInDashboard('atanacak', event)">
                    <div class="parts-stat-icon">ğŸ“‹</div>
                    <div class="parts-stat-value" id="partsDashboardAtanacak">0</div>
                    <div class="parts-stat-label">ATANACAKLAR</div>
                </div>

                <div class="parts-stat-card satisa" onclick="openSectionInDashboard('satisa', event)">
                    <div class="parts-stat-icon">ğŸ’°</div>
                    <div class="parts-stat-value" id="partsDashboardSatisa">0</div>
                    <div class="parts-stat-label">SATIÅA GÄ°DECEK</div>
                </div>

                <div class="parts-stat-card sahiniden" onclick="openSectionInDashboard('sahiniden', event)">
                    <div class="parts-stat-icon">ğŸª</div>
                    <div class="parts-stat-value" id="partsDashboardSahiniden">0</div>
                    <div class="parts-stat-label">SAHÄ°BÄ°NDEN</div>
                </div>

                <!-- Yeni ParÃ§a TÃ¼rleri -->
                <div class="parts-stat-card pil" onclick="openSectionInDashboard('pil', event)">
                    <div class="parts-stat-icon">ğŸ”‹</div>
                    <div class="parts-stat-value" id="partsDashboardPil">0</div>
                    <div class="parts-stat-label">PÄ°L</div>
                </div>

                <div class="parts-stat-card mediaMarkt" onclick="openSectionInDashboard('mediaMarkt', event)">
                    <div class="parts-stat-icon">ğŸ›’</div>
                    <div class="parts-stat-value" id="partsDashboardMediaMarkt">0</div>
                    <div class="parts-stat-label">SATIÅ SONRASI</div>
                </div>

                <div class="parts-stat-card kasa" onclick="openSectionInDashboard('kasa', event)">
                    <div class="parts-stat-icon">ğŸ“±</div>
                    <div class="parts-stat-value" id="partsDashboardKasa">0</div>
                    <div class="parts-stat-label">KASA</div>
                </div>

                <div class="parts-stat-card ekran" onclick="openSectionInDashboard('ekran', event)">
                    <div class="parts-stat-icon">ğŸ–¥ï¸</div>
                    <div class="parts-stat-value" id="partsDashboardEkran">0</div>
                    <div class="parts-stat-label">EKRAN</div>
                </div>

                <div class="parts-stat-card onCam" onclick="openSectionInDashboard('onCam', event)">
                    <div class="parts-stat-icon">ğŸªŸ</div>
                    <div class="parts-stat-value" id="partsDashboardOnCam">0</div>
                    <div class="parts-stat-label">Ã–N CAM</div>
                </div>

                <div class="parts-stat-card pilKasa" onclick="openSectionInDashboard('pilKasa', event)">
                    <div class="parts-stat-icon">ğŸ”‹ğŸ“±</div>
                    <div class="parts-stat-value" id="partsDashboardPilKasa">0</div>
                    <div class="parts-stat-label">PÄ°L + KASA</div>
                </div>

                <div class="parts-stat-card pilEkran" onclick="openSectionInDashboard('pilEkran', event)">
                    <div class="parts-stat-icon">ğŸ”‹ğŸ–¥ï¸</div>
                    <div class="parts-stat-value" id="partsDashboardPilEkran">0</div>
                    <div class="parts-stat-label">PÄ°L + EKRAN</div>
                </div>

                <div class="parts-stat-card ekranKasa" onclick="openSectionInDashboard('ekranKasa', event)">
                    <div class="parts-stat-icon">ğŸ–¥ï¸ğŸ“±</div>
                    <div class="parts-stat-value" id="partsDashboardEkranKasa">0</div>
                    <div class="parts-stat-label">EKRAN + KASA</div>
                </div>

                <div class="parts-stat-card pilEkranKasa" onclick="openSectionInDashboard('pilEkranKasa', event)">
                    <div class="parts-stat-icon">ğŸ”‹ğŸ–¥ï¸ğŸ“±</div>
                    <div class="parts-stat-value" id="partsDashboardPilEkranKasa">0</div>
                    <div class="parts-stat-label">PÄ°L + EKRAN + KASA</div>
                </div>

                <div class="parts-stat-card demontaj" onclick="openSectionInDashboard('demontaj', event)">
                    <div class="parts-stat-icon">ğŸ”§</div>
                    <div class="parts-stat-value" id="partsDashboardDemontaj">0</div>
                    <div class="parts-stat-label">DEMONTAJ</div>
                </div>

                <div class="parts-stat-card montaj" onclick="openSectionInDashboard('montaj', event)">
                    <div class="parts-stat-icon">âš™ï¸</div>
                    <div class="parts-stat-value" id="partsDashboardMontaj">0</div>
                    <div class="parts-stat-label">MONTAJ</div>
                </div>
            </div>

            <!-- TEKNÄ°SYEN ÅERÄ°DÄ° -->
            <div class="technicians-strip">
                <div class="technicians-strip-header">
                    <h3>ğŸ‘¥ Teknisyenler</h3>
                </div>
                <div class="technicians-strip-content">
                    <div class="parts-stat-card gokhan" onclick="openSectionInDashboard('gokhan', event)">
                        <div class="technician-photo-container">
                            <img src="images/gokhan.jpg" alt="GÃ¶khan" class="technician-photo">
                        </div>
                        <div class="parts-stat-value" id="partsDashboardGokhan">0</div>
                        <div class="parts-stat-label">GÃ–KHAN</div>
                    </div>

                    <div class="parts-stat-card yusuf" onclick="openSectionInDashboard('yusuf', event)">
                        <div class="technician-photo-container">
                            <img src="images/yusuf.jpg" alt="Yusuf" class="technician-photo">
                        </div>
                        <div class="parts-stat-value" id="partsDashboardYusuf">0</div>
                        <div class="parts-stat-label">YUSUF</div>
                    </div>

                    <div class="parts-stat-card enes" onclick="openSectionInDashboard('enes', event)">
                        <div class="technician-photo-container">
                            <img src="images/enes.jpg" alt="Enes" class="technician-photo">
                        </div>
                        <div class="parts-stat-value" id="partsDashboardEnes">0</div>
                        <div class="parts-stat-label">ENES</div>
                    </div>

                    <div class="parts-stat-card samet" onclick="openSectionInDashboard('samet', event)">
                        <div class="technician-photo-container">
                            <img src="images/samet.jpg" alt="Samet" class="technician-photo">
                        </div>
                        <div class="parts-stat-value" id="partsDashboardSamet">0</div>
                        <div class="parts-stat-label">SAMET</div>
                    </div>

                    <div class="parts-stat-card engin" onclick="openSectionInDashboard('engin', event)">
                        <div class="technician-photo-container">
                            <img src="images/engin.jpg" alt="Engin" class="technician-photo">
                        </div>
                        <div class="parts-stat-value" id="partsDashboardEngin">0</div>
                        <div class="parts-stat-label">ENGÄ°N</div>
                    </div>

                    <div class="parts-stat-card ismail" onclick="openSectionInDashboard('ismail', event)">
                        <div class="technician-photo-container">
                            <img src="images/ismail.jpg" alt="Ä°smail" class="technician-photo">
                        </div>
                        <div class="parts-stat-value" id="partsDashboardIsmail">0</div>
                        <div class="parts-stat-label">Ä°SMAÄ°L</div>
                    </div>

                    <div class="parts-stat-card mehmet" onclick="openSectionInDashboard('mehmet', event)">
                        <div class="technician-photo-container">
                            <img src="images/mehmet.jpg" alt="Mehmet" class="technician-photo">
                        </div>
                        <div class="parts-stat-value" id="partsDashboardMehmet">0</div>
                        <div class="parts-stat-label">MEHMET</div>
                    </div>

                    <div class="parts-stat-card mert" onclick="openSectionInDashboard('mert', event)">
                        <div class="technician-photo-container">
                            <img src="images/mert.jpg" alt="Mert" class="technician-photo">
                        </div>
                        <div class="parts-stat-value" id="partsDashboardMert">0</div>
                        <div class="parts-stat-label">MERT</div>
                    </div>
                </div>
            </div>
        </div>


        <!-- PARÃ‡A SÄ°PARÄ°Å BUTONU (TEKNÄ°SYENLER Ä°Ã‡Ä°N) - TIMEOUT DASHBOARD ALTINDA -->
        <button id="partOrderButton" class="part-order-button"
            style="display: none; margin: 40px auto 20px auto; max-width: 400px; width: 100%; padding: 15px 30px; font-size: 16px; font-weight: 600;"
            onclick="openPartOrderModal()">
            ğŸ”§ ParÃ§a SipariÅŸ Et
        </button>

        <!-- CÄ°HAZ AL / BARKOD OKUT BÃ–LÃœMÃœ -->
        <div class="container" style="margin: 20px auto; max-width: 1200px;" id="scannerSection">
            <div class="section" style="flex: 1 1 100%;">
                <label for="scannerInput">ğŸ“¡ Cihaz Al/Barkod Okut:</label>
                <textarea id="scannerInput" placeholder="Barkod okuyucu ile okut..." autofocus></textarea>
            </div>
        </div>

        <!-- QR OKUT BÃ–LÃœMÃœ (SADECE MOBÄ°L) -->
        <div class="container qr-scanner-container" style="margin: 20px auto; max-width: 1200px; display: none;" id="qrScannerSection">
            <div class="section qr-scanner-section" style="flex: 1 1 100%;">
                <label>ğŸ“± QR Okut (Mobil):</label>
                <button id="qrScanBtn" class="qr-scan-button" onclick="openQRScanner()">
                    ğŸ“· QR Kod Okut
                </button>
                <div id="qrScannerStatus" class="qr-scanner-status"></div>
            </div>
        </div>

        <!-- QR ONAY BÃ–LÃœMÃœ (SADECE MOBÄ°L) - GRÄ° LÄ°STE ONAYLAMA -->
        <div class="container qr-approve-container" style="margin: 20px auto; max-width: 1200px; display: none;" id="qrApproveSection">
            <div class="section qr-approve-section" style="flex: 1 1 100%;">
                <label>âœ… Gri Liste Onay (Mobil):</label>
                <button id="qrApproveBtn" class="qr-approve-button" onclick="openQRApproveScanner()">
                    ğŸ“· Barkod Onay (QR)
                </button>
                <div id="qrApproveStatus" class="qr-approve-status"></div>
            </div>
        </div>

        <!-- QR SCANNER MODAL -->
        <div class="qr-scanner-modal" id="qrScannerModal">
            <div class="qr-scanner-modal-content">
                <div class="qr-scanner-modal-header">
                    <h2>ğŸ“· QR Kod Okutma</h2>
                    <button class="qr-scanner-close-btn" onclick="closeQRScanner()">âœ•</button>
                </div>
                <div class="qr-scanner-camera-container">
                    <div id="qrReader" style="width: 100%;"></div>
                </div>
                <div class="qr-scanner-info">
                    <p>ğŸ“Œ QR kodu kamera Ã¶nÃ¼ne tutun</p>
                    <p id="qrScannerMessage" class="qr-scanner-message"></p>
                    
                    <!-- Ã‡OKLU MOD DURUM GÃ–STERGESÄ° -->
                    <div id="qrMultiModeIndicator" style="display: none; margin-top: 15px; padding: 12px; background: linear-gradient(135deg, #27ae60, #229954); border-radius: 8px; text-align: center; color: white;">
                        <p style="margin: 0 0 8px 0; font-weight: 600; font-size: 14px;">ğŸ“¦ Ã‡oklu Mod Aktif</p>
                        <p id="qrMultiModeInfo" style="margin: 0 0 10px 0; font-size: 13px;">0 adet okutuldu â†’ -</p>
                        <button onclick="endQRMultiMode()" style="background: white; color: #27ae60; border: none; padding: 8px 20px; border-radius: 6px; font-weight: 600; cursor: pointer; font-size: 13px;">ğŸ›‘ Ã‡oklu Modu Bitir</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- QR TRANSFER SELECT MODAL -->
        <div class="qr-transfer-modal" id="qrTransferModal">
            <div class="qr-transfer-modal-content">
                <div class="qr-transfer-modal-header">
                    <h2>ğŸ”„ Transfer Listesi SeÃ§in</h2>
                    <button class="qr-transfer-close-btn" onclick="closeQRTransferModal()">âœ•</button>
                </div>
                <div class="qr-transfer-info">
                    <p><strong>Okutulan IMEI:</strong> <span id="qrScannedIMEI">-</span></p>
                    <p>Bu cihazÄ± hangi listeye transfer etmek istiyorsunuz?</p>
                    
                    <!-- Ã‡OKLU MOD TOGGLE -->
                    <div style="margin-top: 15px; padding: 10px; background: rgba(52, 152, 219, 0.1); border-radius: 8px; text-align: center;">
                        <label style="display: flex; align-items: center; justify-content: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="qrMultiModeToggle" onchange="toggleQRMultiMode()" style="width: 20px; height: 20px; cursor: pointer;">
                            <span style="font-weight: 600; font-size: 14px;">ğŸ“¦ Ã‡oklu Mod (Art arda QR okutma)</span>
                        </label>
                        <p id="qrMultiModeStatus" style="margin: 5px 0 0 0; font-size: 12px; color: #7f8c8d; display: none;"></p>
                    </div>
                </div>
                <div class="qr-transfer-list-container" id="qrTransferListContainer">
                    <!-- Liste seÃ§enekleri buraya yÃ¼klenecek -->
                </div>
            </div>
        </div>

        <!-- QR ONAY SCANNER MODAL (GRÄ° LÄ°STE ONAYLAMA) -->
        <div class="qr-scanner-modal" id="qrApproveModal">
            <div class="qr-scanner-modal-content">
                <div class="qr-scanner-modal-header">
                    <h2>âœ… Gri Liste Onay</h2>
                    <button class="qr-scanner-close-btn" onclick="closeQRApproveScanner()">âœ•</button>
                </div>
                <div class="qr-scanner-camera-container">
                    <div id="qrApproveReader" style="width: 100%;"></div>
                </div>
                <div class="qr-scanner-info">
                    <p>ğŸ“Œ Gri listeden onaylamak iÃ§in barkod okutun</p>
                    <p id="qrApproveMessage" class="qr-scanner-message"></p>
                </div>
            </div>
        </div>

        <!-- GRÄ° LÄ°STE - ONAY BEKLEYEN TRANSFERLER -->
        <div class="container gri-liste-container" style="margin: 20px auto; max-width: 1200px;" id="griListeSection">
            <div class="section gri-liste-section" style="flex: 1 1 100%;">
                <div class="gri-liste-header">
                    <label>
                        <span id="griListeLabel">â³ Onay Bekleyen Transferler - 0</span>
                    </label>
                    <div class="gri-liste-info">
                        <small>Bu listedeki barkodlar "Barkod Okut" alanÄ±na okutulunca hedef listeye transfer
                            olur</small>
                    </div>
                </div>
                <div id="griListeContent" class="gri-liste-content">
                    <!-- Gri liste iÃ§eriÄŸi buraya yÃ¼klenecek -->
                    <div class="gri-liste-empty">
                        <span>ğŸ“­ Onay bekleyen transfer bulunmuyor</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- WAREHOUSE PANEL (DEPOCU) -->
        <div id="warehousePanel" class="warehouse-panel" style="display: none;">
            <div class="warehouse-header">
                <h2>ğŸ“¦ Depo ParÃ§a YÃ¶netim Paneli</h2>
                <p style="opacity: 0.9; margin-top: 5px;">Bekleyen ParÃ§a Ä°steklerini YÃ¶netin</p>
                <div class="warehouse-stats">
                    <div class="warehouse-stat">
                        <div class="warehouse-stat-label">Bekleyen Ä°stekler</div>
                        <div class="warehouse-stat-value" id="warehousePendingCount">0</div>
                    </div>
                    <div class="warehouse-stat">
                        <div class="warehouse-stat-label">HazÄ±r Olanlar</div>
                        <div class="warehouse-stat-value" id="warehouseReadyCount">0</div>
                    </div>
                    <div class="warehouse-stat">
                        <div class="warehouse-stat-label">Toplam Ä°stekler</div>
                        <div class="warehouse-stat-value" id="warehouseTotalCount">0</div>
                    </div>
                </div>

                <!-- TOPLU HAZIR BUTONU -->
                <button id="markAllReadyBtn" class="mark-all-ready-btn" onclick="markAllOrdersReady()"
                    style="display: none;">
                    âœ… TÃ¼mÃ¼nÃ¼ HazÄ±r Ä°ÅŸaretle
                </button>
            </div>

            <div class="warehouse-orders-container">
                <!-- Bekleyen Ä°stekler BÃ¶lÃ¼mÃ¼ -->
                <div id="warehousePendingOrders" class="warehouse-section pending-section">
                    <!-- Pending orders will be loaded here -->
                </div>

                <!-- Tamamlanan Ä°stekler BÃ¶lÃ¼mÃ¼ -->
                <div id="warehouseCompletedOrders" class="warehouse-section completed-section">
                    <!-- Completed orders will be loaded here -->
                </div>
            </div>
        </div>

        <div class="main-layout" id="mainLayout">
            <div class="left-side">
                <!-- TEKNÄ°SYEN INPUT ALANLARI (GÄ°ZLÄ° - SADECE BACKEND Ä°Ã‡Ä°N) -->
                <div class="container" id="techniciansContainer" style="display: none;">
                    <div class="section" data-section="gokhan">
                        <label for="gokhanInput">
                            <span id="gokhanLabel">ğŸ§‘â€ğŸ”§ GÃ¶khan'Ä±n CihazlarÄ± - 0</span>
                        </label>
                        <textarea id="gokhanInput" placeholder="GÃ¶khan'Ä±n barkodlarÄ±nÄ± buraya yapÄ±ÅŸtÄ±r..."></textarea>
                        <div id="gokhanList" class="mini-list"></div>
                    </div>

                    <div class="section" data-section="yusuf">
                        <label for="yusufInput"><span id="yusufLabel">ğŸ§‘â€ğŸ”§ Yusuf'un CihazlarÄ± - 0</span></label>
                        <textarea id="yusufInput" placeholder="Yusuf'un barkodlarÄ±nÄ± buraya yapÄ±ÅŸtÄ±r..."></textarea>
                        <div id="yusufList" class="mini-list"></div>
                    </div>

                    <div class="section" data-section="enes">
                        <label for="enesInput"><span id="enesLabel">ğŸ§‘â€ğŸ”§ Enes'in CihazlarÄ± - 0</span></label>
                        <textarea id="enesInput" placeholder="Enes'in barkodlarÄ±nÄ± buraya yapÄ±ÅŸtÄ±r..."></textarea>
                        <div id="enesList" class="mini-list"></div>
                    </div>

                    <div class="section" data-section="samet">
                        <label for="sametInput"><span id="sametLabel">ğŸ§‘â€ğŸ”§ Samet'in CihazlarÄ± - 0</span></label>
                        <textarea id="sametInput" placeholder="Samet'in barkodlarÄ±nÄ± buraya yapÄ±ÅŸtÄ±r..."></textarea>
                        <div id="sametList" class="mini-list"></div>
                    </div>


                    <div class="section" data-section="engin">
                        <label for="enginInput"><span id="enginLabel">ğŸ§‘â€ğŸ”§ Montaj / Engin'in CihazlarÄ± -
                                0</span></label>
                        <textarea id="enginInput" placeholder="engin'in barkodlarÄ±nÄ± buraya yapÄ±ÅŸtÄ±r..."></textarea>
                        <div id="enginList" class="mini-list"></div>
                    </div>

                    <div class="section" data-section="ismail">
                        <label for="ismailInput"><span id="ismailLabel">ğŸ§‘â€ğŸ”§ Ä°smail'in CihazlarÄ± - 0</span></label>
                        <textarea id="ismailInput" placeholder="Ä°smail'in barkodlarÄ±nÄ± buraya yapÄ±ÅŸtÄ±r..."></textarea>
                        <div id="ismailList" class="mini-list"></div>
                    </div>

                    <div class="section" data-section="mehmet">
                        <label for="mehmetInput"><span id="mehmetLabel">ğŸ§‘â€ğŸ”§ Mehmet'in CihazlarÄ± - 0</span></label>
                        <textarea id="mehmetInput" placeholder="Mehmet'in barkodlarÄ±nÄ± buraya yapÄ±ÅŸtÄ±r..."></textarea>
                        <div id="mehmetList" class="mini-list"></div>
                    </div>

                    <div class="section" data-section="mert">
                        <label for="mertInput"><span id="mertLabel">ğŸ§‘â€ğŸ”§ Mert'in CihazlarÄ± - 0</span></label>
                        <textarea id="mertInput" placeholder="Mert'in barkodlarÄ±nÄ± buraya yapÄ±ÅŸtÄ±r..."></textarea>
                        <div id="mertList" class="mini-list"></div>
                    </div>
                </div>


                <div class="container" style="margin-top: 20px;" id="normalSearchSection">
                    <div class="section" id="normalUserSearch"
                        style="flex: 1 1 100%; display: none; flex-direction: column;">
                        <label for="searchInputNormal"
                            style="display: block; margin-bottom: 10px; font-size: 18px; font-weight: bold;">ğŸ” Barkod
                            Ara:</label>
                        <textarea id="searchInputNormal" placeholder="Aramak istediÄŸiniz barkodu girin..."
                            style="height: 60px; background: rgba(255,255,255,0.9); color: #333;"></textarea>
                        <div id="searchResultNormal"
                            style="margin-top: 10px; padding: 10px; background: rgba(10, 78, 180, 0.493); border-radius: 8px; min-height: 40px; display: none; color: #fff; width: 100%;">
                        </div>
                        <div id="partInfoNormal" style="display: none; width: 100%;"></div>
                        <div id="historyLogNormal" class="history-log"
                            style="display: none; background: rgba(255,255,255,0.1); margin-top: 10px; width: 100%;">
                        </div>
                    </div>
                </div>

                <!-- TEKNÄ°SYEN PARÃ‡A SÄ°PARÄ°ÅLERÄ° BÃ–LÃœMÃœ -->
                <div id="technicianPartOrders" class="part-orders-section" style="display: none;">
                    <h3>ğŸ”§ ParÃ§a Ä°steklerim</h3>
                    <div id="technicianOrdersList">
                        <!-- Orders will be loaded here -->
                    </div>
                </div>

                <div class="container" style="margin-top: 20px;">
                    <div class="section" style="flex: 1 1 100%;">
                        <label for="teslimEdilenlerInput"><span id="teslimEdilenlerLabel">âœ… Teslim Edilenler -
                                0</span></label>
                        <textarea id="teslimEdilenlerInput" placeholder="Teslim edilen barkodlar..."
                            style="height: 120px;"></textarea>
                        <div id="teslimEdilenlerList" class="mini-list"></div>
                    </div>
                </div>

                <div class="container" style="margin-top: 20px;" id="mainSectionsContainer">
                    <!-- Atanacak Section -->
                    <div class="section" data-section="atanacak">
                        <label for="atanacakInput">
                            <span id="atanacakLabel">ğŸ“‹ Atanacak - 0</span>
                        </label>
                        <textarea id="atanacakInput" placeholder="Atanacak cihazlar..."></textarea>
                        <div id="atanacakList" class="mini-list"></div>
                    </div>

                    <!-- ParÃ§a Bekliyor Section -->
                    <div class="section" data-section="parcaBekliyor">
                        <label for="parcaBekliyorInput">
                            <span id="parcaBekliyorLabel">âš™ï¸ ParÃ§a Bekliyor - 0</span>
                        </label>
                        <textarea id="parcaBekliyorInput" placeholder="ParÃ§a bekleyen cihazlar..."></textarea>
                        <div id="parcaBekliyorList" class="mini-list"></div>
                    </div>

                    <!-- PhoneCheck Section -->
                    <div class="section" data-section="phonecheck">
                        <label for="phonecheckInput">
                            <span id="phonecheckLabel">ğŸ“± PhoneCheck - 0</span>
                        </label>
                        <textarea id="phonecheckInput"
                            placeholder="PhoneCheck'e transfer edilecek barkodlar..."></textarea>
                        <div id="phonecheckList" class="mini-list"></div>
                    </div>

                    <!-- OnarÄ±m TamamlandÄ± Section -->
                    <div class="section" data-section="onarim">
                        <label for="onarimInput">
                            <span id="onarimLabel">ğŸ”§ OnarÄ±m TamamlandÄ± - 0</span>
                        </label>
                        <textarea id="onarimInput" placeholder="OnarÄ±mÄ± tamamlanan cihazlar..."></textarea>
                        <div id="onarimList" class="mini-list"></div>
                    </div>

                    <!-- Ã–n Cam DÄ±ÅŸ Servis Section -->
                    <div class="section" data-section="onCamDisServis">
                        <label for="onCamDisServisInput">
                            <span id="onCamDisServisLabel">ğŸ”¨ Ã–n Cam DÄ±ÅŸ Servis - 0</span>
                        </label>
                        <textarea id="onCamDisServisInput"
                            placeholder="Ã–n cam iÃ§in dÄ±ÅŸ servise gÃ¶nderilecek barkodlar..."></textarea>
                        <div id="onCamDisServisList" class="mini-list"></div>
                    </div>

                    <!-- Anakart DÄ±ÅŸ Servis Section -->
                    <div class="section" data-section="anakartDisServis">
                        <label for="anakartDisServisInput">
                            <span id="anakartDisServisLabel">ğŸ”¨ Anakart DÄ±ÅŸ Servis - 0</span>
                        </label>
                        <textarea id="anakartDisServisInput"
                            placeholder="Anakart iÃ§in dÄ±ÅŸ servise gÃ¶nderilecek barkodlar..."></textarea>
                        <div id="anakartDisServisList" class="mini-list"></div>
                    </div>

                    <!-- Garanti Servis Section -->
                    <div class="section" data-section="garantiServis">
                        <label for="garantiServisInput">
                            <span id="garantiServisLabel">ğŸ›¡ï¸ Garanti Servis - 0</span>
                        </label>
                        <textarea id="garantiServisInput"
                            placeholder="Garanti kapsamÄ±ndaki cihazlar..."></textarea>
                        <div id="garantiServisList" class="mini-list"></div>
                    </div>

                    <!-- Son KullanÄ±cÄ± Section -->
                    <div class="section" data-section="SonKullanÄ±cÄ±">
                        <label for="SonKullanÄ±cÄ±Input">
                            <span id="SonKullanÄ±cÄ±Label">ğŸ‘¤ Son KullanÄ±cÄ± - 0</span>
                        </label>
                        <textarea id="SonKullanÄ±cÄ±Input" placeholder="Son KullanÄ±cÄ± barkodlar..."></textarea>
                        <div id="SonKullanÄ±cÄ±List" class="mini-list"></div>
                    </div>

                    <!-- SatÄ±ÅŸa Gidecek Section -->
                    <div class="section" data-section="satisa">
                        <label for="satisaInput">
                            <span id="satisaLabel">ğŸ’° SatÄ±ÅŸa Gidecek - 0</span>
                        </label>
                        <textarea id="satisaInput" placeholder="SatÄ±ÅŸa gidecek barkodlar..."></textarea>
                        <div id="satisaList" class="mini-list"></div>
                    </div>

                    <!-- Sahibinden Section -->
                    <div class="section" data-section="sahiniden">
                        <label for="sahinidenInput">
                            <span id="sahinidenLabel">ğŸª Sahibinden - 0</span>
                        </label>
                        <textarea id="sahinidenInput" placeholder="Sahibinden gelen barkodlar..."></textarea>
                        <div id="sahinidenList" class="mini-list"></div>
                    </div>

                    <!-- Media Markt Section -->
                    <div class="section" data-section="mediaMarkt">
                        <label for="mediaMarktInput">
                            <span id="mediaMarktLabel">ğŸ›’ SatÄ±ÅŸ SonrasÄ± - 0</span>
                        </label>
                        <textarea id="mediaMarktInput" placeholder="Media Markt barkodlarÄ±..."></textarea>
                        <div id="mediaMarktList" class="mini-list"></div>
                    </div>

                    <!-- ========== PARÃ‡A/Ä°ÅLEM TÃœRLERÄ° BÃ–LÃœMÃœ ========== -->

                    <!-- PÄ°L Section -->
                    <div class="section" data-section="pil">
                        <label for="pilInput">
                            <span id="pilLabel">ğŸ”‹ PÄ°L - 0</span>
                        </label>
                        <textarea id="pilInput" placeholder="Pil deÄŸiÅŸimi yapÄ±lacak cihazlar..."></textarea>
                        <div id="pilList" class="mini-list"></div>
                    </div>

                    <!-- KASA Section -->
                    <div class="section" data-section="kasa">
                        <label for="kasaInput">
                            <span id="kasaLabel">ğŸ“± KASA - 0</span>
                        </label>
                        <textarea id="kasaInput" placeholder="Kasa deÄŸiÅŸimi yapÄ±lacak cihazlar..."></textarea>
                        <div id="kasaList" class="mini-list"></div>
                    </div>

                    <!-- EKRAN Section -->
                    <div class="section" data-section="ekran">
                        <label for="ekranInput">
                            <span id="ekranLabel">ğŸ–¥ï¸ EKRAN - 0</span>
                        </label>
                        <textarea id="ekranInput" placeholder="Ekran deÄŸiÅŸimi yapÄ±lacak cihazlar..."></textarea>
                        <div id="ekranList" class="mini-list"></div>
                    </div>

                    <!-- Ã–N CAM Section -->
                    <div class="section" data-section="onCam">
                        <label for="onCamInput">
                            <span id="onCamLabel">ğŸªŸ Ã–N CAM - 0</span>
                        </label>
                        <textarea id="onCamInput" placeholder="Ã–n cam deÄŸiÅŸimi yapÄ±lacak cihazlar..."></textarea>
                        <div id="onCamList" class="mini-list"></div>
                    </div>

                    <!-- PÄ°L + KASA Section -->
                    <div class="section" data-section="pilKasa">
                        <label for="pilKasaInput">
                            <span id="pilKasaLabel">ğŸ”‹ğŸ“± PÄ°L + KASA - 0</span>
                        </label>
                        <textarea id="pilKasaInput" placeholder="Pil + Kasa deÄŸiÅŸimi yapÄ±lacak cihazlar..."></textarea>
                        <div id="pilKasaList" class="mini-list"></div>
                    </div>

                    <!-- PÄ°L + EKRAN Section -->
                    <div class="section" data-section="pilEkran">
                        <label for="pilEkranInput">
                            <span id="pilEkranLabel">ğŸ”‹ğŸ–¥ï¸ PÄ°L + EKRAN - 0</span>
                        </label>
                        <textarea id="pilEkranInput"
                            placeholder="Pil + Ekran deÄŸiÅŸimi yapÄ±lacak cihazlar..."></textarea>
                        <div id="pilEkranList" class="mini-list"></div>
                    </div>

                    <!-- EKRAN + KASA Section -->
                    <div class="section" data-section="ekranKasa">
                        <label for="ekranKasaInput">
                            <span id="ekranKasaLabel">ğŸ–¥ï¸ğŸ“± EKRAN + KASA - 0</span>
                        </label>
                        <textarea id="ekranKasaInput"
                            placeholder="Ekran + Kasa deÄŸiÅŸimi yapÄ±lacak cihazlar..."></textarea>
                        <div id="ekranKasaList" class="mini-list"></div>
                    </div>

                    <!-- PÄ°L + EKRAN + KASA Section -->
                    <div class="section" data-section="pilEkranKasa">
                        <label for="pilEkranKasaInput">
                            <span id="pilEkranKasaLabel">ğŸ”‹ğŸ–¥ï¸ğŸ“± PÄ°L + EKRAN + KASA - 0</span>
                        </label>
                        <textarea id="pilEkranKasaInput"
                            placeholder="Pil + Ekran + Kasa deÄŸiÅŸimi yapÄ±lacak cihazlar..."></textarea>
                        <div id="pilEkranKasaList" class="mini-list"></div>
                    </div>

                    <!-- DEMONTAJ Section -->
                    <div class="section" data-section="demontaj">
                        <label for="demontajInput">
                            <span id="demontajLabel">ğŸ”§ DEMONTAJ - 0</span>
                        </label>
                        <textarea id="demontajInput" placeholder="Demontaj yapÄ±lacak cihazlar..."></textarea>
                        <div id="demontajList" class="mini-list"></div>
                    </div>

                    <!-- MONTAJ Section -->
                    <div class="section" data-section="montaj">
                        <label for="montajInput">
                            <span id="montajLabel">âš™ï¸ MONTAJ - 0</span>
                        </label>
                        <textarea id="montajInput" placeholder="Montaj yapÄ±lacak cihazlar..."></textarea>
                        <div id="montajList" class="mini-list"></div>
                    </div>

                    <!-- YETKÄ°LENDÄ°RME Section -->
                    <div class="section" data-section="yetkilendirme">
                        <label for="yetkilendirmeInput">
                            <span id="yetkilendirmeLabel">âœ… YETKÄ°LENDÄ°RME - 0</span>
                        </label>
                        <textarea id="yetkilendirmeInput" placeholder="Yetkilendirme bekleyen cihazlar..."></textarea>
                        <div id="yetkilendirmeList" class="mini-list"></div>
                    </div>

                </div>




            </div>


            <div class="reset-modal-overlay" id="resetDashboardModal">
                <div class="reset-modal">
                    <h2>âš ï¸ Dashboard SÄ±fÄ±rlama</h2>
                    <p>
                        <strong>Bu iÅŸlem ÅŸunlarÄ± sÄ±fÄ±rlayacak:</strong><br><br>
                        ğŸ“Š BugÃ¼n Teslim AlÄ±nan: <span id="resetTeslimAlinan">0</span><br>
                        ğŸ“¤ BugÃ¼n Teslim Edilen: <span id="resetTeslimEdilen">0</span><br>
                        ğŸ“‹ Kaynak DaÄŸÄ±lÄ±mÄ± (Atanacak, SonKullanÄ±cÄ±, Sahibinden, SatÄ±ÅŸ SonrasÄ±)<br><br>
                        <strong style="color: #ffd700;">âš ï¸ Bu iÅŸlem geri alÄ±namaz!</strong><br>
                        Ä°ÅŸlem database'de loglanacaktÄ±r.
                    </p>
                    <div class="reset-modal-buttons">
                        <button class="reset-modal-btn cancel" onclick="closeResetDashboardModal()">âŒ Ä°ptal</button>
                        <button class="reset-modal-btn confirm" onclick="confirmResetDashboard()">âœ… SÄ±fÄ±rla</button>
                    </div>
                </div>
            </div>


            <div class="modal-overlay" id="syncModal">
                <div class="modal" style="max-width: 700px;">
                    <h2>ğŸ”„ Liste Senkronizasyonu</h2>
                    <div class="sync-results" id="syncResults">
                        <div style="text-align: center; padding: 20px;">
                            <div
                                style="display: inline-block; width: 40px; height: 40px; border: 4px solid rgba(255,255,255,0.3); border-top-color: #fff; border-radius: 50%; animation: spin 1s linear infinite;">
                            </div>
                            <p>Ã‡akÄ±ÅŸmalar taranÄ±yor...</p>
                        </div>
                    </div>
                    <div class="modal-buttons">
                        <button class="modal-button secondary" onclick="closeSyncModal()">Ä°ptal</button>
                        <button class="modal-button primary" onclick="fixAllConflicts()" id="fixAllBtn" disabled>ğŸ”„ TÃ¼m
                            Ã‡akÄ±ÅŸmalarÄ±
                            DÃ¼zelt</button>
                    </div>
                </div>
            </div>

            <!-- DATA SYNC VERIFICATION MODAL (SADECE ADMIN) -->
            <div class="modal-overlay" id="dataSyncModal">
                <div class="modal" style="max-width: 900px; max-height: 90vh; overflow-y: auto;">
                    <h2>ğŸ”„ Veri DoÄŸrulama ve Senkronizasyon</h2>
                    <div class="data-sync-info"
                        style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <p style="margin: 0; font-size: 14px;">
                            â±ï¸ <strong>Son Kontrol:</strong> <span id="lastSyncCheck">-</span><br>
                            ğŸ” <strong>Kontrol AralÄ±ÄŸÄ±:</strong> Her 5 dakika<br>
                            ğŸ“Š <strong>Kontrol Edilen Listeler:</strong> TÃ¼m listeler ve Dashboard verileri
                        </p>
                    </div>

                    <div class="sync-results" id="dataSyncResults">
                        <div style="text-align: center; padding: 20px;">
                            <div
                                style="display: inline-block; width: 40px; height: 40px; border: 4px solid rgba(255,255,255,0.3); border-top-color: #fff; border-radius: 50%; animation: spin 1s linear infinite;">
                            </div>
                            <p>Veriler kontrol ediliyor...</p>
                        </div>
                    </div>

                    <div class="modal-buttons">
                        <button class="modal-button secondary" onclick="closeDataSyncModal()">Kapat</button>
                        <button class="modal-button primary" onclick="fixAllDataMismatches()" id="fixAllDataBtn"
                            disabled>
                            âœ… TÃ¼m UyumsuzluklarÄ± DÃ¼zelt
                        </button>
                        <button class="modal-button" onclick="forceDataSyncCheck()" style="background: #3498db;">
                            ğŸ”„ Yeniden Kontrol Et
                        </button>
                    </div>
                </div>
            </div>

            <!-- SYSTEM LOGS MODAL (SADECE ADMIN) -->
            <div class="modal-overlay" id="systemLogsModal">
                <div class="modal" style="max-width: 1200px; max-height: 90vh; overflow-y: auto;">
                    <h2>ğŸ“‹ Sistem LoglarÄ±</h2>

                    <!-- Filtreler -->
                    <div class="logs-filters"
                        style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <div
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-size: 13px;">ğŸ“… BaÅŸlangÄ±Ã§
                                    Tarihi</label>
                                <input type="date" id="logsStartDate"
                                    style="width: 100%; padding: 8px; border-radius: 6px; border: none;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-size: 13px;">ğŸ“… BitiÅŸ
                                    Tarihi</label>
                                <input type="date" id="logsEndDate"
                                    style="width: 100%; padding: 8px; border-radius: 6px; border: none;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-size: 13px;">ğŸ‘¤ KullanÄ±cÄ±</label>
                                <input type="text" id="logsUserFilter" placeholder="TÃ¼mÃ¼"
                                    style="width: 100%; padding: 8px; border-radius: 6px; border: none;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-size: 13px;">ğŸ“¦ IMEI</label>
                                <input type="text" id="logsImeiFilter" placeholder="15 haneli IMEI" maxlength="15"
                                    style="width: 100%; padding: 8px; border-radius: 6px; border: none;">
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-size: 13px;">ğŸ“‹ Liste</label>
                                <select id="logsListFilter"
                                    style="width: 100%; padding: 8px; border-radius: 6px; border: none;">
                                    <option value="">TÃ¼mÃ¼</option>
                                    <option value="partOrders">Teknisyen Adetleri / ParÃ§a Ä°stekleri</option>

                                    <option value="atanacak">ğŸ“‹ Atanacak</option>
                                    <option value="parcaBekliyor">âš™ï¸ ParÃ§a Bekliyor</option>
                                    <option value="phonecheck">ğŸ“± PhoneCheck</option>
                                    <option value="onarim">ğŸ”§ OnarÄ±m TamamlandÄ±</option>
                                    <option value="gokhan">ğŸ§‘â€ğŸ”§ GÃ¶khan</option>
                                    <option value="enes">ğŸ§‘â€ğŸ”§ Enes</option>
                                    <option value="yusuf">ğŸ§‘â€ğŸ”§ Yusuf</option>
                                    <option value="samet">ğŸ§‘â€ğŸ”§ Samet</option>
                                    <option value="engin">ğŸ§‘â€ğŸ”§ Engin</option>

                                    <option value="ismail">ğŸ§‘â€ğŸ”§ Ä°smail</option>
                                    <option value="mehmet">ğŸ§‘â€ğŸ”§ Mehmet</option>
                                    <option value="onCamDisServis">ğŸ”¨ Ã–n Cam DÄ±ÅŸ Servis</option>
                                    <option value="anakartDisServis">ğŸ”¨ Anakart DÄ±ÅŸ Servis</option>
                                    <option value="satisa">ğŸ’° SatÄ±ÅŸa Gidecek</option>
                                    <option value="sahiniden">ğŸª Sahibinden</option>
                                    <option value="mediaMarkt">ğŸ›’ SatÄ±ÅŸ SonrasÄ±</option>
                                    <option value="SonKullanÄ±cÄ±">ğŸ‘¤ Son KullanÄ±cÄ±</option>
                                    <option value="teslimEdilenler">âœ… Teslim Edilenler</option>
                                </select>
                            </div>
                            <div style="display: flex; align-items: flex-end;">
                                <button onclick="loadSystemLogs()"
                                    style="width: 100%; padding: 8px 15px; background: #3498db; color: white; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">
                                    ğŸ” LoglarÄ± YÃ¼kle
                                </button>
                            </div>
                        </div>
                        <div style="margin-top: 10px; text-align: right;">
                            <button onclick="clearLogsFilters()"
                                style="padding: 6px 12px; background: #95a5a6; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 12px;">
                                ğŸ—‘ï¸ Filtreleri Temizle
                            </button>
                        </div>
                    </div>

                    <!-- Ä°statistikler -->
                    <div id="logsStats"
                        style="display: none; background: rgba(46, 204, 113, 0.2); padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #2ecc71;">
                        <strong>ğŸ“Š Toplam: <span id="logsTotalCount">0</span> iÅŸlem</strong>
                    </div>

                    <!-- Loglar -->
                    <div id="systemLogsResults" style="max-height: 500px; overflow-y: auto;">
                        <div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.6);">
                            ğŸ“‹ Filtre seÃ§ip "LoglarÄ± YÃ¼kle" butonuna tÄ±klayÄ±n
                        </div>
                    </div>

                    <div class="modal-buttons" style="margin-top: 20px;">
                        <button class="modal-button secondary" onclick="closeSystemLogsModal()">Kapat</button>
                        <button class="modal-button" onclick="exportLogsToExcel()" id="exportLogsBtn" disabled
                            style="background: #27ae60;">
                            ğŸ“Š Excel'e Aktar
                        </button>
                    </div>
                </div>
            </div>

            <!-- DEPO STATS MODAL (ADMIN & SEMI-ADMIN) -->
            <div class="depo-stats-modal" id="depoStatsModal">
                <div class="depo-stats-content">
                    <div class="depo-stats-header">
                        <h2>ğŸ“¦ Depo Ä°statistikleri</h2>
                        <button class="depo-stats-close" onclick="closeDepoStatsModal()">âœ•</button>
                    </div>
                    <p class="depo-stats-subtitle">ParÃ§a SipariÅŸ Durumu</p>
                    <div class="depo-stats-grid">
                        <div class="depo-stat-card pending">
                            <div class="depo-stat-icon">â³</div>
                            <div class="depo-stat-value" id="depoStatPending">0</div>
                            <div class="depo-stat-label">Bekleyen Ä°stekler</div>
                        </div>
                        <div class="depo-stat-card ready">
                            <div class="depo-stat-icon">âœ…</div>
                            <div class="depo-stat-value" id="depoStatReady">0</div>
                            <div class="depo-stat-label">HazÄ±r Olanlar</div>
                        </div>
                        <div class="depo-stat-card total">
                            <div class="depo-stat-icon">ğŸ“Š</div>
                            <div class="depo-stat-value" id="depoStatTotal">0</div>
                            <div class="depo-stat-label">Toplam Ä°stekler</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ORIGINAL: <script> -->
            <script src="script.js"></script>



            <div id="timeoutWarning" class="timeout-warning" onclick="openTimeoutModal()">
                <div class="timeout-icon">âš ï¸</div>
                <div class="timeout-content">
                    <div class="timeout-title">Zaman AÅŸÄ±mÄ±!</div>
                    <div class="timeout-text"><span id="timeoutCount">0</span> cihaz 3 gÃ¼nden fazladÄ±r bekliyor.</div>
                    <div class="timeout-subtext">Detaylar iÃ§in tÄ±klayÄ±n</div>
                </div>
            </div>

            <div class="modal-overlay" id="timeoutModal">
                <div class="modal" style="max-width: 900px;">
                    <div class="modal-header">
                        <h2>âš ï¸ Zaman AÅŸÄ±mÄ±na UÄŸrayan Cihazlar</h2>
                        <button class="close-modal-btn" onclick="closeTimeoutModal()">âœ•</button>
                    </div>

                    <div class="timeout-info-box">
                        <p>AÅŸaÄŸÄ±daki cihazlar <strong>3 gÃ¼nden uzun sÃ¼redir</strong> ilgili listelerde beklemektedir ve
                            henÃ¼z teslim edilmemiÅŸtir.</p>
                    </div>

                    <div class="timeout-table-container">
                        <table class="timeout-table">
                            <thead>
                                <tr>
                                    <th style="width: 40px;"><input type="checkbox" id="selectAllTimeout"
                                            onchange="toggleAllTimeout(this)"></th>
                                    <th>Barkod</th>
                                    <th>BulunduÄŸu Liste</th>
                                    <th>Bekleme SÃ¼resi</th>
                                    <th>Son Ä°ÅŸlem</th>
                                    <th>KullanÄ±cÄ±</th>
                                </tr>
                            </thead>
                            <tbody id="timeoutListBody">
                            </tbody>
                        </table>
                    </div>

                    <div class="modal-buttons" style="margin-top: 20px;">
                        <button class="modal-button secondary" onclick="ignoreSelectedTimeouts()">
                            ğŸ‘ï¸ Dikkate Alma / Bir Daha GÃ¶sterme
                        </button>
                        <button class="modal-button primary" onclick="transferSelectedToDelivered()">
                            âœ… SeÃ§ilenleri Teslim Edilenlere GÃ¶nder
                        </button>
                        <button class="modal-button" style="background: #3498db; color: white;"
                            onclick="checkTimeouts()">
                            ğŸ”„ Yenile
                        </button>
                    </div>
                </div>
            </div>


    <!-- BAKIM MODU EKRANI -->
    <div id="maintenanceScreen" style="display: none;">
        <div class="maintenance-screen-content">
            <div class="maintenance-icon">ğŸ”§</div>
            <h1 class="maintenance-title">Sistem BakÄ±mda</h1>
            <p class="maintenance-message">
                Sistem ÅŸu anda bakÄ±m Ã§alÄ±ÅŸmasÄ± yapÄ±lmaktadÄ±r.<br>
                LÃ¼tfen daha sonra tekrar deneyiniz.
            </p>
            <div class="maintenance-spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>
            <p class="maintenance-info">
                â° BakÄ±m Ã§alÄ±ÅŸmasÄ± devam ediyor...<br>
                <small>En kÄ±sa sÃ¼rede hizmetinizde olacaÄŸÄ±z.</small>
            </p>
        </div>
    </div>


</body>

</html>
