function renderMiniList(name) {
  if (!miniLists[name] || !userCodes[name]) return;
  
  const list = miniLists[name];
  list.innerHTML = "";
  
  // âœ… YENÄ° EKLENEN: BarkodlarÄ± tarih/saate gÃ¶re sÄ±rala
  const codesArray = Array.from(userCodes[name]).map(code => ({
    code: code,
    timestamp: codeTimestamps[name][code] || "Tarih yok",
    timestampRaw: convertToTimestamp(codeTimestamps[name][code]), // Timestamp'i sayÄ±ya Ã§evir
    user: codeUsers[name][code] || ""
  }));
  
  // En yeni Ã¼stte (timestampRaw'a gÃ¶re azalan sÄ±ralama)
  codesArray.sort((a, b) => b.timestampRaw - a.timestampRaw);
  
  codesArray.forEach(item => {
    const code = item.code;
    const div = document.createElement("div");
    div.className = "mini-item";
    
    const specialClasses = {
      atanacak: "waiting",
      parcaBekliyor: "waiting",
      phonecheck: "phonecheck",
      onarim: "onarim",
      onCamDisServis: "waiting",
      anakartDisServis: "waiting",
      satisa: "satisa",
      sahiniden: "sahiniden",
      mediaMarkt: "mediamarkt",
      teslimEdilenler: "teslim",
      SonKullanÄ±cÄ±: "waiting"
    };
    
    if (specialClasses[name]) {
      div.classList.add(specialClasses[name]);
    } else {
      div.classList.add(scannedCodes.has(code) ? "matched" : "unmatched");
    }
    
    let codeDisplay = code;
    
    const listsWithUser = ['phonecheck', 'parcaBekliyor', 'atanacak', 'onarim', 'onCamDisServis', 'anakartDisServis', 'satisa', 'sahiniden', 'mediaMarkt', 'teslimEdilenler', 'SonKullanÄ±cÄ±'];
    
    if (listsWithUser.includes(name) && item.user) {
      codeDisplay = `${code} - ${item.user}`;
    }

    div.innerHTML = `
      <div class="mini-item-row">
        <span>${codeDisplay}</span>
        <span class="status"></span>
      </div>
      <div class="mini-item-time">ğŸ“… ${item.timestamp}${item.user ? ' â€¢ ' + item.user : ''}</div>
      ${currentUserRole === 'admin' ? `
        <div class="mini-item-actions">
          <button class="item-action-btn edit" onclick="openEditBarcodeModal('${code}', '${name}')">âœï¸ DÃ¼zenle</button>
          <button class="item-action-btn delete" onclick="deleteBarcode('${code}', '${name}')">ğŸ—‘ï¸ Sil</button>
        </div>
      ` : ''}
    `;
    list.appendChild(div);
  });
}

// âœ… YENÄ° FONKSÄ°YON: TÃ¼rkÃ§e tarih formatÄ±nÄ± timestamp'e Ã§evir
function convertToTimestamp(dateString) {
  if (!dateString || dateString === "Tarih yok") {
    return 0; // En alta gÃ¶nder
  }
  
  // EÄŸer zaten sayÄ±sal timestamp ise direkt dÃ¶ndÃ¼r
  if (typeof dateString === 'number') {
    return dateString;
  }
  
  try {
    // TÃ¼rkÃ§e tarih formatÄ±: "19.11.2025 14:30:45"
    const parts = dateString.split(' ');
    if (parts.length !== 2) return 0;
    
    const dateParts = parts[0].split('.');
    const timeParts = parts[1].split(':');
    
    if (dateParts.length !== 3 || timeParts.length !== 3) return 0;
    
    const day = parseInt(dateParts[0]);
    const month = parseInt(dateParts[1]) - 1; // JavaScript aylarÄ± 0-11 arasÄ±
    const year = parseInt(dateParts[2]);
    const hour = parseInt(timeParts[0]);
    const minute = parseInt(timeParts[1]);
    const second = parseInt(timeParts[2]);
    
    return new Date(year, month, day, hour, minute, second).getTime();
  } catch (error) {
    console.error('Tarih Ã§evirme hatasÄ±:', dateString, error);
    return 0;
  }
}
